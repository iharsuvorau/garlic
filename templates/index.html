<!DOCTYPE html>
<html lang="en">
<head>{{template "head" .}}</head>
<body>
{{template "site-header" .}}
<section class="introduction">
    <h1 class="h1">Sessions Control</h1>
    <p>This dashboard allows the control of the Pepper robot through the local network simply by clicking corresponding
        buttons, either <em>questions</em>, or <em>positive answers</em>, or <em>negative answers</em>. On the right
        side, there is available <em>the general motion library</em>, so a user can initiate any movement at any time.
    </p>
</section>
<main class="sessions-control">
    <section class="sessions">
        <div class="mb2">
            <h2 class="h2 mb1">{{if .currentSessionName}}{{.currentSessionName}}{{else}}Choose a session{{end}}</h2>
            <select name="sessions" id="sessionList" class="">
                <option value="">Please, select the session</option>
                {{range .sessions}}
                    <option value="{{.ID}}" {{if eq .ID $.currentSessionID}}selected{{end}}>{{.Name}}</option>
                {{end}}
            </select>
        </div>

        <section class="session">
            {{range .sessions}}
                {{if eq .ID $.currentSessionID}}
                    {{$sessionID := .ID}}
                    {{$questionCounter := 0}}
                    {{range .Items}}
                        {{$questionCounter = ($questionCounter | increment)}}
                        {{/* each HTML element must have an ID in order to be recognized and be found later in the
                        JS script to mark it as "visited" or "active" */}}
                        <div class="session-item" id="{{.ID}}" data-itemid="{{.ID}}">

                            <div id="{{.Question.ID}}" class="question session-item-element" data-itemid="{{.Question.ID}}">
                                <p class="h6 bold caps" data-itemid="{{.Question.ID}}">Question {{$questionCounter}}</p>
                                <div data-itemid="{{.Question.ID}}">
                                    <p class="h2 mb0" data-itemid="{{.Question.ID}}">{{.Question.Phrase}}</p>
                                    <p class="h6" data-itemid="{{.Question.ID}}"><span class="bold">audio</span>: {{.Question.AudioFilePath | basename}}
                                        <br/><span class="bold">motion</span>: {{.Question.MotionName}}{{if .Question.MotionDelay}} <span class="bold">with delay</span> of {{.Question.MotionDelay}}{{end}}</p>
                                    <audio id="audio-{{.Question.ID}}" src="/{{.Question.AudioFilePath}}">Your
                                        browser does not support the <code>audio</code> element.</audio>
                                </div>
                            </div>

                            <div class="answers">
                                {{if .PositiveAnswer}}
                                <div id="{{.PositiveAnswer.ID}}" class="positive-answer session-item-element"
                                     data-itemid="{{.PositiveAnswer.ID}}">
                                    {{if .PositiveAnswer.Phrase}}
                                    <p class="h3 mb0 positive" data-itemid="{{.PositiveAnswer.ID}}">{{.PositiveAnswer.Phrase}}</p>
                                    {{end}}
                                    <p class="h6" data-itemid="{{.PositiveAnswer.ID}}">{{if .PositiveAnswer.AudioFilePath}}audio: {{.PositiveAnswer.AudioFilePath | basename}}
                                        <br/>{{end}}{{if .PositiveAnswer.MotionName}}motion: {{.PositiveAnswer.MotionName}}{{end}}</p>
                                    <audio id="audio-{{.PositiveAnswer.ID}}" src="/{{.Question.AudioFilePath}}">Your
                                        browser does not support the <code>audio</code> element.</audio>
                                </div>
                                {{end}}

                                {{if .NegativeAnswer}}
                                <div id="{{.NegativeAnswer.ID}}" class="negative-answer session-item-element" data-itemid="{{.NegativeAnswer.ID}}">
                                    {{if .NegativeAnswer.Phrase}}
                                    <p class="h3 mb0 negative" data-itemid="{{.NegativeAnswer.ID}}">{{.NegativeAnswer.Phrase}}</p>
                                    {{end}}
                                    <p class="h6" data-itemid="{{.NegativeAnswer.ID}}">{{if .NegativeAnswer.AudioFilePath}}audio: {{.NegativeAnswer.AudioFilePath | basename}}
                                        <br/>{{end}}{{if .NegativeAnswer.MotionName}}motion: {{.NegativeAnswer.MotionName}}{{end}}</p>
                                    <audio id="audio-{{.PositiveAnswer.ID}}" src="/{{.NegativeAnswer.AudioFilePath}}">Your browser does not support the <code>audio</code> element.</audio>
                                </div>
                                {{end}}
                            </div>

                        </div>
                    {{end}}
                {{end}}
            {{end}}
        </section>

        <form action="/voice" method="post" style="display: none;">
            <div class="field">
                <label for="phrase">Phrase</label>
                <input id="phrase" name="phrase" type="text">
            </div>
            <div class="field">
                <input type="submit" value="Send"/>
            </div>
        </form>
    </section>
    <aside>
        <h2 class="h2">Motion Library</h2>
    </aside>
</main>
{{template "body-bottom" .}}
</body>
</html>